# 基本的な使い方

## 目次
1. [はじめに](#はじめに)
2. [環境構築](#環境構築)
3. [基本的な使用手順](#基本的な使用手順)
   - [プロトコルファイルの準備](#1-プロトコルファイルの準備)
   - [シミュレーションの実行](#2-シミュレーションの実行)
   - [結果の解析](#3-結果の解析)

## はじめに

EXPRORER_MSMDは、共溶媒分子動力学（MSMD）シミュレーションを実行し、解析するためのツールです。
このツールを使用することで、以下のような解析が可能になります：

- タンパク質表面における共溶媒分子の分布解析
- タンパク質のホットスポット同定
- プローブ分子の環境解析

## 環境構築

このリポジトリにはDockerファイルが含まれており、以下のツールを含む実行環境を簡単に構築できます。

- Python 3
- AmberTools 20
- Gromacs 2021.5
- Packmol 18.169

## 基本的な使用手順

### 1. プロトコルファイルの準備

シミュレーションの設定は、YAMLファイルで定義します。以下は設定の一部です。
完全な設定例は `example/example_protocol.yaml` を参照してください。
また、より詳細な設定オプションについては[高度な使用方法](advanced.md)を参照してください。

```yaml
general:
  name: TEST_PROJECT         # プロジェクト名
  workdir: ./PATH/TO/WORKDIR # 出力ディレクトリ

input:
  protein:
    pdb: protein.pdb       # タンパク質構造
  probe:
    cid: PROBE            # プローブ分子名
    molar: 0.25          # 濃度（mol/L）
```

### 2. シミュレーションの実行

```bash
./exprorer_msmd protocol.yaml
```

これを行うことで、以下の処理が自動的に実行されます。

1. シミュレーション系の構築
2. MDシミュレーションの実行
3. PMAPの作成

### 3. 結果の解析

#### トラジェクトリの確認

シミュレーション結果は自動的にPDBファイルに変換され、
`./PATH/TO/WORKDIR/system*/[プロジェクト名]_woWAT_10ps.pdb` として保存されています。
なお、 `*` の部分は、実行時のシミュレーションIDであり、複数の独立試行がある場合にはそれぞれのIDが付与されます。

このトラジェクトリは、PyMOLなどで開くことで、シミュレーション中のタンパク質とプローブの動きを確認できます。

#### ホットスポット解析
```bash
./protein_hotspot protocol.yaml
```

Under construction

#### プローブ環境解析
```bash
./probe_profile protocol.yaml
```

Under construction

## 次のステップ

- より詳細な設定方法については[高度な使用方法](advanced.md)を参照してください。
- プローブ分子の準備方法については[プローブ分子の準備](probe_preparation.md)を参照してください。